import t from"../../utils/extend.min.js";import e from"../../utils/getOriginXY.min.js";import n from"../../utils/hypot.min.js";import r from"../../utils/is.min.js";import{resolveRectLike as i,rectToXY as o}from"../../utils/rect.min.js";import{makeModifier as s}from"../base.min.js";const a={start(n){const{interaction:r,interactable:s,element:a,rect:l,state:f,startOffset:g}=n,{options:c}=f,x=c.offsetWithOrigin?function(t){const{element:n}=t.interaction;return o(i(t.state.options.origin,null,null,[n]))||e(t.interactable,n,t.interaction.prepared.name)}(n):{x:0,y:0};let m;if("startCoords"===c.offset)m={x:r.coords.start.page.x,y:r.coords.start.page.y};else{const t=i(c.offset,s,a,[r]);m=o(t)||{x:0,y:0},m.x+=x.x,m.y+=x.y}const{relativePoints:y}=c;f.offsets=l&&y&&y.length?y.map((t,e)=>({index:e,relativePoint:t,x:g.left-l.width*t.x+m.x,y:g.top-l.height*t.y+m.y})):[t({index:0,relativePoint:null},m)]},set(i){const{interaction:o,coords:s,state:a}=i,{options:l,offsets:f}=a,g=e(o.interactable,o.element,o.prepared.name),c=t({},s),x=[];l.offsetWithOrigin||(c.x-=g.x,c.y-=g.y);for(const t of f){const e=c.x-t.x,n=c.y-t.y;for(let i=0,s=l.targets.length;i<s;i++){const s=l.targets[i];let a;a=r.func(s)?s(e,n,o._proxy,t,i):s,a&&x.push({x:(r.number(a.x)?a.x:e)+t.x,y:(r.number(a.y)?a.y:n)+t.y,range:r.number(a.range)?a.range:l.range,source:s,index:i,offset:t})}}const m={target:null,inRange:!1,distance:0,range:0,delta:{x:0,y:0}};for(const t of x){const e=t.range,r=t.x-c.x,i=t.y-c.y,o=n(r,i);let s=o<=e;e===1/0&&m.inRange&&m.range!==1/0&&(s=!1),m.target&&!(s?m.inRange&&e!==1/0?o/e<m.distance/m.range:e===1/0&&m.range!==1/0||o<m.distance:!m.inRange&&o<m.distance)||(m.target=t,m.distance=o,m.range=e,m.inRange=s,m.delta.x=r,m.delta.y=i)}return m.inRange&&(s.x=m.target.x,s.y=m.target.y),a.closest=m,m},defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!0,origin:null,relativePoints:null,endOnly:!1,enabled:!1}};export default s(a,"snap");export{a as snap};
//# sourceMappingURL=pointer.min.js.map